{{!--
    Global Template: Product Recommendations Rows

    This global template inserts a row of recommended products, based on a selected Einstein Recipe.

    Requirements:
    1) Ensure that the available content zones are defined in your Sitemap.

    Customizations:
    1) Media query breakpoints can be changed in CSS.
    2) For performance optimization, add an observer selector as a second argument to
    Evergage.DisplayUtil.pageElementLoaded in Clientside Code that waits for the content zone to load into the DOM.
    3) To support rich text, add the @richText(true) decorator to configuration properties in Serverside Code.
    Handlebars expressions for these properties must be wrapped in three sets of curly braces (e.g. {{{expression}}} ).
    4) Remove or change the default values for the configuration properties in Serverside Code.
    5) Change any and all values of aria-label attributes as necessary.
--}}

<div id="evg-recipe-product-recommendations" data-evg-campaign-id="{{campaign}}" data-evg-experience-id="{{experience}}"
data-evg-campaign-group="{{userGroup}}" aria-label="Product Recommendations {{#if title}}- {{title}}{{/if}}">
    <h3 class="evg-h3">
        {{title}}
    </h3>
    <div class="evg-container evg-product-recommendations">
        {{#each products}}
        <div class="evg-product-recommendation" data-evg-product-id="{{id}}">
            <a href="{{attributes.url.value}}">
                <img class="evg-product-image" data-evg-product-imageUrl="{{attributes.imageUrl.value}}"
                src="{{attributes.imageUrl.value}}" alt="{{attributes.name.value}}"/>
            </a>
            <div class="evg-product-details">
                <div class="evg-product-rec-name--wrapper{{#unless ../nameVisibility}} evg-hide{{/unless}}">
                    <a class="evg-product-name" data-evg-product-name="{{attributes.name.value}}"
                    href="{{attributes.url.value}}">
                        {{attributes.name.value}}
                    </a>
                </div>
                {{#if attributes.description.value}}
                <div class="evg-product-description{{#unless ../descriptionVisibility}} evg-hide{{/unless}}">
                    {{attributes.description.value}}
                </div>
                {{/if}}
                <div class="evg-product-price{{#unless ../priceVisibility}} evg-hide{{/unless}}"
                data-evg-product-price="{{attributes.price.value}}">
                    ${{attributes.price.value}}
                </div>
                <div class="evg-product-rating{{#unless ../ratingVisibility}} evg-hide{{/unless}}"
                data-evg-product-rating="{{attributes.rating.value}}" aria-label="Rating: {{attributes.rating.value}}">
                    <div style="width: auto"
                    class="evg-star-empty" eg-ratings="{{#if attributes.rating.value}}{{attributes.rating.value}}{{else}}0{{/if}}">
                        ★★★★★
                    </div>
                    <div style="width: calc({{#if attributes.rating.value}}{{attributes.rating.value}}{{else}}0{{/if}} / 5 * 100%);"
                    class="evg-star-fill">
                        ★★★★★
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</div>
